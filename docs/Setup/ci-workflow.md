---
sidebar_position: 4
---

# GitHub Automation

# DIG Network CI Integration for Automated Deployment

This guide describes how to automate the process of committing your build files to the DIG data store and pushing them to your DIG Node for propagation into the DIG Network using Continuous Integration (CI) pipelines. Single Page Applications (SPAs) built in JavaScript can be easily deployed in this way.

---

## Overview

By integrating the DIG CLI into your CI pipeline, you can automatically deploy your application to the DIG Node whenever changes are pushed to your repository’s main branch. The DIG Node will then propagate the new data into the DIG Network.

---

## Prerequisites

### 1. **Manual Initial Commit Required**
   - **Before using CI**, you need to manually commit and push at least one build from your development machine to your DIG Node. This is a **one-time setup** and failure to complete this step will result in CI failure.
   - Run the following commands from your development machine to manually commit and push your build:
     ```bash
     dignode init
     dignode commit
     dignode push
     ```
   - This requirement will be removed in a future update.

### 2. **GitHub Secrets and Variables Setup**
   You need to configure the following GitHub secrets and variables for your project repository. These secrets will be used in the CI pipeline for authentication and deployment.

   #### **Required GitHub Secrets:**
   - **`DIG_REMOTE_PASSWORD`**: The autogenerated password for your DIG Node.
   - **`DIG_REMOTE_USERNAME`**: The autogenerated username for your DIG Node.
   - **`DIG_REMOTE_IP`**: The public IP address of your DIG Node.
   - **`DIG_NODE_WALLET_SEED`**: The dedicated seed phrase for your DIG Node wallet. 
     - **Important**: **DO NOT INPUT YOUR MAIN WALLET SEED PHRASE**. Use a **dedicated seed phrase** specifically for your DIG Node that contains only the necessary funds.

   #### **Required GitHub Variable:**
   - **`DIG_STORE_ID`**: The Store ID that was created when you manually initialized the store using `dignode init`.

---

## Example GitHub Workflow

Below is an example GitHub workflow (`deploy.yaml`) that automatically deploys your build files to your DIG Node every time a commit is pushed to the `main` branch.

```yaml
name: DIG CLI

on:
  push:
    branches:
      - main

jobs:
  store-management:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '20'

      - name: Install DIG CLI
        run: npm install @dignetwork/dig-chia-cli@alpha -g

      - name: Build the project
        run: npm run build

      - name: Commit and Push to DIG Network
        uses: DIG-Network/actions/publish-to-dignetwork@main
        with:
          store_id: ${{ vars.DIG_STORE_ID }}
          remote_password: ${{ secrets.DIG_REMOTE_PASSWORD }}
          remote_username: ${{ secrets.DIG_REMOTE_USERNAME }}
          remote_ip: ${{ secrets.DIG_REMOTE_IP }}
          seed_phrase: ${{ secrets.DIG_NODE_WALLET_SEED }}
```

---

## Steps to Set Up CI Deployment

### 1. **Set GitHub Secrets**

In your repository’s settings, navigate to **Secrets and variables** -> **Actions**, and add the following secrets:

- `DIG_REMOTE_PASSWORD`: The autogenerated password from your DIG Node.
- `DIG_REMOTE_USERNAME`: The autogenerated username from your DIG Node.
- `DIG_REMOTE_IP`: The public IP address of your DIG Node.
- `DIG_NODE_WALLET_SEED`: The dedicated wallet seed phrase used for your DIG Node.

### 2. **Add GitHub Variable**

In the same **Secrets and variables** section, add the following variable:

- `DIG_STORE_ID`: The Store ID from when you initialized the store using `dignode init`.

---

## Workflow Breakdown

- **Trigger**: The workflow is triggered on any push to the `main` branch.
- **Node Setup**: The workflow installs Node.js and the DIG CLI.
- **Build**: Your project is built (ensure your `package.json` has a build script).
- **Commit & Push**: The build files are automatically committed to the DIG data store and pushed to your DIG Node using the credentials and store information provided in the secrets and variables.

---

## Important Notes

1. **Manual Initial Setup**: You **must manually commit and push** at least one initial build from your local development machine using the `dig commit` and `dig push` commands. This will create the initial store on your DIG Node. Failure to do this will cause your CI process to fail.
   
2. **Security**: Always use a **dedicated seed phrase** for your DIG Node wallet. **Do not use your main wallet's seed phrase** to avoid security risks.

3. **Single Page Applications**: This setup is particularly suited for SPAs built in JavaScript, allowing for a seamless deployment process to the DIG Network.

---

By following these steps, you can set up automated deployment to your DIG Node and easily propagate your project to the DIG Network using a CI workflow.